{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/React and JS/scocial media/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/React and JS/scocial media/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"G:/projects/React and JS/scocial media/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"G:/projects/React and JS/scocial media/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{usersAPI}from\"../API/api\";import{stateArrayChange}from\"../utilits/reducer_utilits/arrayChange\";var FOLLOW='users/FOLLOW';var UN_FOLLOW='users/UN-FOLLOW';var SET_USERS='users/SET-USERS';var SET_CURRENT_PAGE='users/SET-CURRENT-PAGE';var SET_TOTAL_USERS='users/SET-TOTAL-USERS';var SET_LOADER='users/SET-LOADER';var TOGGLE_FOLLOW_IN_PROGRESS='users/TOGGLE_FOLLOW-IN-PROGRESS';var InitializeState={users:[],currentPage:1,totalPage:0,amountUser:20,isFetching:true,followInProgress:[]};var usersReducer=function usersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:InitializeState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case FOLLOW:debugger;return _objectSpread(_objectSpread({},state),{},{users:stateArrayChange(state.users,action.userId,\"id\",{followed:true})});case UN_FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:stateArrayChange(state.users,action.userId,\"id\",{followed:false})});case SET_USERS:return _objectSpread(_objectSpread({},state),{},{users:_toConsumableArray(action.users)});case SET_CURRENT_PAGE:return _objectSpread(_objectSpread({},state),{},{currentPage:action.currentPage});case SET_TOTAL_USERS:return _objectSpread(_objectSpread({},state),{},{totalPage:action.amount});case SET_LOADER:return _objectSpread(_objectSpread({},state),{},{isFetching:action.isFetching});case TOGGLE_FOLLOW_IN_PROGRESS:return _objectSpread(_objectSpread({},state),{},{followInProgress:action.isFetching?[].concat(_toConsumableArray(state.followInProgress),[action.userId]):state.followInProgress.filter(function(id){return id!==action.userId;})});default:return state;}};export var followSuccess=function followSuccess(userId){return{type:FOLLOW,userId:userId};};export var unFollowSuccess=function unFollowSuccess(userId){return{type:UN_FOLLOW,userId:userId};};export var setUsers=function setUsers(users){return{type:SET_USERS,users:users};};export var setCurrentPage=function setCurrentPage(currentPage){return{type:SET_CURRENT_PAGE,currentPage:currentPage};};export var setTotalPage=function setTotalPage(amount){return{type:SET_TOTAL_USERS,amount:amount};};export var IsFetching=function IsFetching(isFetching){return{type:SET_LOADER,isFetching:isFetching};};export var followIPAC=function followIPAC(isFetching,userId){return{type:TOGGLE_FOLLOW_IN_PROGRESS,isFetching:isFetching,userId:userId};};export var requestUsers=function requestUsers(currentPage,amountUser){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(IsFetching(true));_context.next=3;return usersAPI.getUsers(currentPage,amountUser);case 3:data=_context.sent;dispatch(IsFetching(false));dispatch(setUsers(data.items));dispatch(setTotalPage(data.totalCount));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var follow=function follow(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(followIPAC(true,userId));_context2.next=3;return usersAPI.unFollowUser(userId);case 3:data=_context2.sent;if(data.resultCode===0){dispatch(unFollowSuccess(userId));}dispatch(followIPAC(false,userId));case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var unFollow=function unFollow(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(followIPAC(true,userId));_context3.next=3;return usersAPI.followUser(userId);case 3:data=_context3.sent;if(data.resultCode===0){dispatch(followSuccess(userId));}dispatch(followIPAC(false,userId));case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default usersReducer;","map":{"version":3,"sources":["G:/projects/React and JS/scocial media/my-app/src/Redux/usersReducer.js"],"names":["usersAPI","stateArrayChange","FOLLOW","UN_FOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS","SET_LOADER","TOGGLE_FOLLOW_IN_PROGRESS","InitializeState","users","currentPage","totalPage","amountUser","isFetching","followInProgress","usersReducer","state","action","type","userId","followed","amount","filter","id","followSuccess","unFollowSuccess","setUsers","setCurrentPage","setTotalPage","IsFetching","followIPAC","requestUsers","dispatch","getUsers","data","items","totalCount","follow","unFollowUser","resultCode","unFollow","followUser"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../API/api\";\r\nimport {stateArrayChange} from \"../utilits/reducer_utilits/arrayChange\";\r\n\r\nconst FOLLOW = 'users/FOLLOW'\r\nconst UN_FOLLOW = 'users/UN-FOLLOW'\r\nconst SET_USERS = 'users/SET-USERS'\r\nconst SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE'\r\nconst SET_TOTAL_USERS = 'users/SET-TOTAL-USERS'\r\nconst SET_LOADER = 'users/SET-LOADER'\r\nconst TOGGLE_FOLLOW_IN_PROGRESS = 'users/TOGGLE_FOLLOW-IN-PROGRESS'\r\n\r\nconst InitializeState = {\r\n    users: [],\r\n    currentPage: 1,\r\n    totalPage: 0,\r\n    amountUser: 20,\r\n    isFetching: true,\r\n    followInProgress: [],\r\n\r\n}\r\n\r\nconst usersReducer = (state = InitializeState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            debugger\r\n            return {\r\n                ...state,\r\n                users: stateArrayChange(state.users, action.userId, \"id\", {followed: true})\r\n            }\r\n        case UN_FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: stateArrayChange(state.users, action.userId, \"id\", {followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n\r\n        case SET_TOTAL_USERS:\r\n            return {\r\n                ...state,\r\n                totalPage: action.amount\r\n            }\r\n        case SET_LOADER:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_FOLLOW_IN_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followInProgress: action.isFetching\r\n                    ? [...state.followInProgress, action.userId]\r\n                    : state.followInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId) => ({type: FOLLOW, userId})\r\nexport const unFollowSuccess = (userId) => ({type: UN_FOLLOW, userId})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\r\nexport const setTotalPage = (amount) => ({type: SET_TOTAL_USERS, amount})\r\nexport const IsFetching = (isFetching) => ({type: SET_LOADER, isFetching})\r\nexport const followIPAC = (isFetching, userId) => ({type: TOGGLE_FOLLOW_IN_PROGRESS, isFetching, userId})\r\n\r\n\r\nexport const requestUsers = (currentPage, amountUser) => {\r\n    return async (dispatch) => {\r\n        dispatch(IsFetching(true))\r\n        const data = await usersAPI.getUsers(currentPage, amountUser)\r\n        dispatch(IsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setTotalPage(data.totalCount))\r\n    }\r\n}\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        dispatch(followIPAC(true, userId))\r\n        const data = await usersAPI.unFollowUser(userId)\r\n\r\n        if (data.resultCode === 0) {\r\n            dispatch(unFollowSuccess(userId))\r\n        }\r\n        dispatch(followIPAC(false, userId))\r\n\r\n    }\r\n}\r\nexport const unFollow = (userId) => {\r\n    return async (dispatch) => {\r\n        dispatch(followIPAC(true, userId))\r\n        const data = await usersAPI.followUser(userId)\r\n\r\n        if (data.resultCode === 0) {\r\n            dispatch(followSuccess(userId))\r\n        }\r\n        dispatch(followIPAC(false, userId))\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer"]},"metadata":{},"sourceType":"module"}