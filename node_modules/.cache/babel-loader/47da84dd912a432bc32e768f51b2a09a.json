{"ast":null,"code":"import { usersAPI } from \"../API/api\";\nimport { stateArrayChange } from \"../utilits/reducer_utilits/arrayChange\";\nconst FOLLOW = 'users/FOLLOW';\nconst UN_FOLLOW = 'users/UN-FOLLOW';\nconst SET_USERS = 'users/SET-USERS';\nconst SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE';\nconst SET_TOTAL_USERS = 'users/SET-TOTAL-USERS';\nconst SET_LOADER = 'users/SET-LOADER';\nconst TOGGLE_FOLLOW_IN_PROGRESS = 'users/TOGGLE_FOLLOW-IN-PROGRESS';\nconst InitializeState = {\n  users: [],\n  currentPage: 1,\n  totalPage: 0,\n  amountUser: 20,\n  isFetching: true,\n  followInProgress: []\n};\n\nconst usersReducer = (state = InitializeState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return { ...state,\n        users: stateArrayChange(state.users, action.userId, \"id\", {\n          followed: true\n        })\n      };\n\n    case UN_FOLLOW:\n      return { ...state,\n        users: stateArrayChange(state.users, action.userId, \"id\", {\n          followed: false\n        })\n      };\n\n    case SET_USERS:\n      return { ...state,\n        users: [...action.users]\n      };\n\n    case SET_CURRENT_PAGE:\n      return { ...state,\n        currentPage: action.currentPage\n      };\n\n    case SET_TOTAL_USERS:\n      return { ...state,\n        totalPage: action.amount\n      };\n\n    case SET_LOADER:\n      return { ...state,\n        isFetching: action.isFetching\n      };\n\n    case TOGGLE_FOLLOW_IN_PROGRESS:\n      return { ...state,\n        followInProgress: action.isFetching ? [...state.followInProgress, action.userId] : state.followInProgress.filter(id => id !== action.userId)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const followSuccess = userId => ({\n  type: FOLLOW,\n  userId\n});\nexport const unFollowSuccess = userId => ({\n  type: UN_FOLLOW,\n  userId\n});\nexport const setUsers = users => ({\n  type: SET_USERS,\n  users\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const setTotalPage = amount => ({\n  type: SET_TOTAL_USERS,\n  amount\n});\nexport const IsFetching = isFetching => ({\n  type: SET_LOADER,\n  isFetching\n});\n_c = IsFetching;\nexport const followIPAC = (isFetching, userId) => ({\n  type: TOGGLE_FOLLOW_IN_PROGRESS,\n  isFetching,\n  userId\n});\nexport const requestUsers = (currentPage, amountUser) => {\n  return async dispatch => {\n    dispatch(IsFetching(true));\n    const data = await usersAPI.getUsers(currentPage, amountUser);\n    dispatch(IsFetching(false));\n    dispatch(setUsers(data.items));\n    dispatch(setTotalPage(data.totalCount));\n  };\n};\nexport const follow = userId => {\n  return async dispatch => {\n    dispatch(followIPAC(true, userId));\n    const data = await usersAPI.unFollowUser(userId);\n\n    if (data.resultCode === 0) {\n      dispatch(unFollowSuccess(userId));\n    }\n\n    dispatch(followIPAC(false, userId));\n  };\n};\nexport const unFollow = userId => {\n  return async dispatch => {\n    dispatch(followIPAC(true, userId));\n    const data = await usersAPI.followUser(userId);\n\n    if (data.resultCode === 0) {\n      dispatch(followSuccess(userId));\n    }\n\n    dispatch(followIPAC(false, userId));\n  };\n};\nexport default usersReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"IsFetching\");","map":{"version":3,"sources":["G:/projects/React and JS/scocial media/my-app/src/Redux/usersReducer.js"],"names":["usersAPI","stateArrayChange","FOLLOW","UN_FOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS","SET_LOADER","TOGGLE_FOLLOW_IN_PROGRESS","InitializeState","users","currentPage","totalPage","amountUser","isFetching","followInProgress","usersReducer","state","action","type","userId","followed","amount","filter","id","followSuccess","unFollowSuccess","setUsers","setCurrentPage","setTotalPage","IsFetching","followIPAC","requestUsers","dispatch","data","getUsers","items","totalCount","follow","unFollowUser","resultCode","unFollow","followUser"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../API/api\";\r\nimport {stateArrayChange} from \"../utilits/reducer_utilits/arrayChange\";\r\n\r\nconst FOLLOW = 'users/FOLLOW'\r\nconst UN_FOLLOW = 'users/UN-FOLLOW'\r\nconst SET_USERS = 'users/SET-USERS'\r\nconst SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE'\r\nconst SET_TOTAL_USERS = 'users/SET-TOTAL-USERS'\r\nconst SET_LOADER = 'users/SET-LOADER'\r\nconst TOGGLE_FOLLOW_IN_PROGRESS = 'users/TOGGLE_FOLLOW-IN-PROGRESS'\r\n\r\nconst InitializeState = {\r\n    users: [],\r\n    currentPage: 1,\r\n    totalPage: 0,\r\n    amountUser: 20,\r\n    isFetching: true,\r\n    followInProgress: [],\r\n\r\n}\r\n\r\nconst usersReducer = (state = InitializeState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: stateArrayChange(state.users, action.userId, \"id\", {followed: true})\r\n            }\r\n        case UN_FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: stateArrayChange(state.users, action.userId, \"id\", {followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n\r\n        case SET_TOTAL_USERS:\r\n            return {\r\n                ...state,\r\n                totalPage: action.amount\r\n            }\r\n        case SET_LOADER:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_FOLLOW_IN_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followInProgress: action.isFetching\r\n                    ? [...state.followInProgress, action.userId]\r\n                    : state.followInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId) => ({type: FOLLOW, userId})\r\nexport const unFollowSuccess = (userId) => ({type: UN_FOLLOW, userId})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\r\nexport const setTotalPage = (amount) => ({type: SET_TOTAL_USERS, amount})\r\nexport const IsFetching = (isFetching) => ({type: SET_LOADER, isFetching})\r\nexport const followIPAC = (isFetching, userId) => ({type: TOGGLE_FOLLOW_IN_PROGRESS, isFetching, userId})\r\n\r\n\r\nexport const requestUsers = (currentPage, amountUser) => {\r\n    return async (dispatch) => {\r\n        dispatch(IsFetching(true))\r\n        const data = await usersAPI.getUsers(currentPage, amountUser)\r\n        dispatch(IsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setTotalPage(data.totalCount))\r\n    }\r\n}\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        dispatch(followIPAC(true, userId))\r\n        const data = await usersAPI.unFollowUser(userId)\r\n\r\n        if (data.resultCode === 0) {\r\n            dispatch(unFollowSuccess(userId))\r\n        }\r\n        dispatch(followIPAC(false, userId))\r\n\r\n    }\r\n}\r\nexport const unFollow = (userId) => {\r\n    return async (dispatch) => {\r\n        dispatch(followIPAC(true, userId))\r\n        const data = await usersAPI.followUser(userId)\r\n\r\n        if (data.resultCode === 0) {\r\n            dispatch(followSuccess(userId))\r\n        }\r\n        dispatch(followIPAC(false, userId))\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer"]},"metadata":{},"sourceType":"module"}